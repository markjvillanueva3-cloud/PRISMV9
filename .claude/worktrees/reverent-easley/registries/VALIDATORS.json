{
  "version": "1.0.0",
  "description": "Validation rules at every layer boundary - SAFETY CRITICAL",
  "categories": {
    "TYPE": {
      "V-TYPE-001": {
        "name": "IsNumber",
        "rule": "typeof value === 'number' && !isNaN(value)"
      },
      "V-TYPE-002": {
        "name": "IsPositive",
        "rule": "value > 0"
      },
      "V-TYPE-003": {
        "name": "IsNonNegative",
        "rule": "value >= 0"
      },
      "V-TYPE-004": {
        "name": "IsInRange",
        "rule": "value >= min && value <= max"
      },
      "V-TYPE-005": {
        "name": "IsString",
        "rule": "typeof value === 'string'"
      },
      "V-TYPE-006": {
        "name": "IsArray",
        "rule": "Array.isArray(value)"
      },
      "V-TYPE-007": {
        "name": "IsObject",
        "rule": "typeof value === 'object' && value !== null"
      },
      "V-TYPE-008": {
        "name": "HasRequiredFields",
        "rule": "required.every(f => f in obj)"
      }
    },
    "PHYSICS": {
      "V-PHYS-001": {
        "name": "SpindleSpeedLimit",
        "rule": "rpm > 0 && rpm <= machine.spindle_max_rpm",
        "severity": "CRITICAL"
      },
      "V-PHYS-002": {
        "name": "FeedRateLimit",
        "rule": "feed > 0 && feed <= machine.max_feed_rate",
        "severity": "CRITICAL"
      },
      "V-PHYS-003": {
        "name": "DepthOfCutLimit",
        "rule": "doc > 0 && doc <= tool.max_doc",
        "severity": "CRITICAL"
      },
      "V-PHYS-004": {
        "name": "WidthOfCutLimit",
        "rule": "woc > 0 && woc <= tool.diameter",
        "severity": "HIGH"
      },
      "V-PHYS-005": {
        "name": "ChipThicknessMin",
        "rule": "h >= MIN_CHIP_THICKNESS",
        "severity": "MEDIUM"
      },
      "V-PHYS-006": {
        "name": "CuttingSpeedLimit",
        "rule": "Vc > 0 && Vc <= material.max_Vc",
        "severity": "HIGH"
      },
      "V-PHYS-007": {
        "name": "ForceReasonable",
        "rule": "Fc > 0 && Fc < MAX_FORCE_THRESHOLD",
        "severity": "CRITICAL"
      },
      "V-PHYS-008": {
        "name": "PowerAvailable",
        "rule": "Pc <= machine.spindle_power * efficiency",
        "severity": "CRITICAL"
      },
      "V-PHYS-009": {
        "name": "TorqueAvailable",
        "rule": "torque <= machine.torque_at_rpm(rpm)",
        "severity": "CRITICAL"
      },
      "V-PHYS-010": {
        "name": "TemperatureLimit",
        "rule": "T < tool.max_temperature",
        "severity": "HIGH"
      }
    },
    "TOOL": {
      "V-TOOL-001": {
        "name": "ToolDiameterPositive",
        "rule": "diameter > 0",
        "severity": "CRITICAL"
      },
      "V-TOOL-002": {
        "name": "ToolLengthPositive",
        "rule": "length > 0",
        "severity": "CRITICAL"
      },
      "V-TOOL-003": {
        "name": "FlutesPositive",
        "rule": "flutes >= 1",
        "severity": "HIGH"
      },
      "V-TOOL-004": {
        "name": "HelixAngleValid",
        "rule": "helix >= 0 && helix <= 60",
        "severity": "MEDIUM"
      },
      "V-TOOL-005": {
        "name": "RakeAngleValid",
        "rule": "rake >= -20 && rake <= 30",
        "severity": "MEDIUM"
      },
      "V-TOOL-006": {
        "name": "ReliefAngleValid",
        "rule": "relief >= 3 && relief <= 20",
        "severity": "MEDIUM"
      },
      "V-TOOL-007": {
        "name": "ToolStrength",
        "rule": "force < tool.max_force",
        "severity": "CRITICAL"
      },
      "V-TOOL-008": {
        "name": "ToolDeflection",
        "rule": "deflection < max_deflection",
        "severity": "HIGH"
      },
      "V-TOOL-009": {
        "name": "ToolLifePositive",
        "rule": "tool_life > 0",
        "severity": "HIGH"
      },
      "V-TOOL-010": {
        "name": "ChipLoadValid",
        "rule": "fz >= 0.01 && fz <= 0.5",
        "severity": "HIGH"
      }
    },
    "MACHINE": {
      "V-MACH-001": {
        "name": "WithinEnvelope",
        "rule": "all_coords_within_travel",
        "severity": "CRITICAL"
      },
      "V-MACH-002": {
        "name": "SpindlePowerOK",
        "rule": "power_required <= power_available",
        "severity": "CRITICAL"
      },
      "V-MACH-003": {
        "name": "SpindleTorqueOK",
        "rule": "torque_required <= torque_available",
        "severity": "CRITICAL"
      },
      "V-MACH-004": {
        "name": "RapidClearance",
        "rule": "clearance >= safe_clearance",
        "severity": "CRITICAL"
      },
      "V-MACH-005": {
        "name": "ToolFits",
        "rule": "tool_length <= max_tool_length",
        "severity": "CRITICAL"
      },
      "V-MACH-006": {
        "name": "ATCCapacity",
        "rule": "tool_count <= atc_capacity",
        "severity": "HIGH"
      },
      "V-MACH-007": {
        "name": "AxisLimits",
        "rule": "all_axes_within_limits",
        "severity": "CRITICAL"
      },
      "V-MACH-008": {
        "name": "AccelerationOK",
        "rule": "accel <= max_accel",
        "severity": "HIGH"
      }
    },
    "MATERIAL": {
      "V-MAT-001": {
        "name": "HardnessValid",
        "rule": "hardness > 0 && hardness < 10000",
        "severity": "HIGH"
      },
      "V-MAT-002": {
        "name": "DensityValid",
        "rule": "density > 0 && density < 25000",
        "severity": "MEDIUM"
      },
      "V-MAT-003": {
        "name": "KienzleValid",
        "rule": "kc1_1 > 0 && mc > 0 && mc < 1",
        "severity": "HIGH"
      },
      "V-MAT-004": {
        "name": "ThermalValid",
        "rule": "k > 0 && cp > 0",
        "severity": "MEDIUM"
      },
      "V-MAT-005": {
        "name": "StrengthValid",
        "rule": "tensile > 0 && yield > 0 && yield <= tensile",
        "severity": "HIGH"
      }
    },
    "BUSINESS": {
      "V-BUS-001": {
        "name": "CostPositive",
        "rule": "cost >= 0",
        "severity": "MEDIUM"
      },
      "V-BUS-002": {
        "name": "TimePositive",
        "rule": "time >= 0",
        "severity": "MEDIUM"
      },
      "V-BUS-003": {
        "name": "QuantityPositive",
        "rule": "quantity >= 1",
        "severity": "MEDIUM"
      },
      "V-BUS-004": {
        "name": "EfficiencyValid",
        "rule": "efficiency > 0 && efficiency <= 1",
        "severity": "LOW"
      }
    },
    "PRISM": {
      "V-PRISM-001": {
        "name": "SafetyThreshold",
        "rule": "S >= 0.70",
        "severity": "CRITICAL",
        "enforcement": "HARD_BLOCK"
      },
      "V-PRISM-002": {
        "name": "OmegaThreshold",
        "rule": "Omega >= 0.70",
        "severity": "HIGH",
        "enforcement": "WARN"
      },
      "V-PRISM-003": {
        "name": "ReasoningThreshold",
        "rule": "R >= 0.60",
        "severity": "MEDIUM",
        "enforcement": "WARN"
      },
      "V-PRISM-004": {
        "name": "CodeThreshold",
        "rule": "C >= 0.70",
        "severity": "MEDIUM",
        "enforcement": "WARN"
      },
      "V-PRISM-005": {
        "name": "ProcessThreshold",
        "rule": "P >= 0.60",
        "severity": "MEDIUM",
        "enforcement": "WARN"
      },
      "V-PRISM-006": {
        "name": "EvidenceLevel",
        "rule": "evidence >= L3",
        "severity": "HIGH",
        "enforcement": "BLOCK"
      },
      "V-PRISM-007": {
        "name": "AntiRegression",
        "rule": "new_count >= old_count",
        "severity": "CRITICAL",
        "enforcement": "HARD_BLOCK"
      }
    }
  },
  "boundaries": {
    "DATABASE_TO_TRANSFORMER": [
      "V-TYPE-001",
      "V-TYPE-007",
      "V-TYPE-008"
    ],
    "TRANSFORMER_TO_FORMULA": [
      "V-MAT-001",
      "V-MAT-002",
      "V-MAT-003",
      "V-TOOL-001",
      "V-MACH-001"
    ],
    "FORMULA_TO_ENGINE": [
      "V-TYPE-001",
      "V-TYPE-004",
      "V-PHYS-005",
      "V-PHYS-006"
    ],
    "ENGINE_TO_SKILL": [
      "V-PHYS-001",
      "V-PHYS-002",
      "V-PHYS-007",
      "V-PHYS-008",
      "V-TOOL-007"
    ],
    "SKILL_TO_SERVICE": [
      "V-PRISM-001",
      "V-PRISM-002",
      "V-MACH-002",
      "V-MACH-003"
    ],
    "SERVICE_TO_PRODUCT": [
      "V-PRISM-001",
      "V-BUS-001",
      "V-BUS-002"
    ]
  }
}