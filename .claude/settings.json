{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "^(Write|Edit|MultiEdit)$",
        "hooks": [
          {
            "type": "command",
            "command": "bash /c/PRISM/.claude/helpers/file-protect.sh \"$TOOL_INPUT_file_path\" 2>/dev/null",
            "timeout": 1000,
            "continueOnError": false
          },
          {
            "type": "command",
            "command": "[ -n \"$TOOL_INPUT_file_path\" ] && npx @claude-flow/cli@latest hooks pre-edit --file \"$TOOL_INPUT_file_path\" 2>/dev/null || true",
            "timeout": 5000,
            "continueOnError": true
          },
          {
            "type": "command",
            "command": "echo \"$TOOL_INPUT_file_path\" | grep -q '\\.ts$' && echo \"$TOOL_INPUT_file_path\" | grep -q 'mcp-server/src/' && ! echo \"$TOOL_INPUT_file_path\" | grep -q '\\.test\\.' && ! echo \"$TOOL_INPUT_file_path\" | grep -q '\\.spec\\.' && echo '{\"additionalContext\": \"TS QUALITY REMINDER: Ensure no console.log in production code, no \\\"any\\\" types, use import (not require), use execFileNoThrow (not exec) for shell commands, handle async errors.\"}' || true",
            "timeout": 1000,
            "continueOnError": true
          }
        ]
      },
      {
        "matcher": "^Bash$",
        "hooks": [
          {
            "type": "command",
            "command": "bash /c/PRISM/.claude/helpers/bash-intercept.sh \"$TOOL_INPUT_command\" 2>/dev/null",
            "timeout": 2000,
            "continueOnError": false
          },
          {
            "type": "command",
            "command": "[ -n \"$TOOL_INPUT_command\" ] && npx @claude-flow/cli@latest hooks pre-command --command \"$TOOL_INPUT_command\" 2>/dev/null || true",
            "timeout": 5000,
            "continueOnError": true
          }
        ]
      },
      {
        "matcher": "^Task$",
        "hooks": [
          {
            "type": "command",
            "command": "bash /c/PRISM/.claude/helpers/task-context-injector.sh 2>/dev/null || true",
            "timeout": 2000,
            "continueOnError": true
          },
          {
            "type": "command",
            "command": "[ -n \"$TOOL_INPUT_prompt\" ] && npx @claude-flow/cli@latest hooks pre-task --task-id \"task-$(date +%s)\" --description \"$TOOL_INPUT_prompt\" 2>/dev/null || true",
            "timeout": 5000,
            "continueOnError": true
          }
        ]
      },
      {
        "matcher": "^Read$",
        "hooks": [
          {
            "type": "command",
            "command": "bash /c/PRISM/.claude/helpers/read-optimizer.sh 2>/dev/null || true",
            "timeout": 1000,
            "continueOnError": true
          },
          {
            "type": "command",
            "command": "[ -n \"$TOOL_INPUT_file_path\" ] && npx @claude-flow/cli@latest hooks pre-read --file \"$TOOL_INPUT_file_path\" 2>/dev/null || true",
            "timeout": 3000,
            "continueOnError": true
          }
        ]
      },
      {
        "matcher": "^(Glob|Grep)$",
        "hooks": [
          {
            "type": "command",
            "command": "bash /c/PRISM/.claude/helpers/search-optimizer.sh 2>/dev/null || true",
            "timeout": 1000,
            "continueOnError": true
          },
          {
            "type": "command",
            "command": "npx @claude-flow/cli@latest hooks pre-search --pattern \"${TOOL_INPUT_pattern:-}\" 2>/dev/null || true",
            "timeout": 3000,
            "continueOnError": true
          }
        ]
      },
      {
        "matcher": "^WebFetch$",
        "hooks": [
          {
            "type": "command",
            "command": "bash /c/PRISM/.claude/helpers/web-cache.sh 2>/dev/null || true",
            "timeout": 1000,
            "continueOnError": true
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "^(Write|Edit|MultiEdit)$",
        "hooks": [
          {
            "type": "command",
            "command": "[ -n \"$TOOL_INPUT_file_path\" ] && npx @claude-flow/cli@latest hooks post-edit --file \"$TOOL_INPUT_file_path\" --success \"${TOOL_SUCCESS:-true}\" 2>/dev/null || true",
            "timeout": 5000,
            "continueOnError": true
          },
          {
            "type": "command",
            "command": "fp=\"$TOOL_INPUT_file_path\"; echo \"$fp\" | grep -q 'mcp-server/src/' && rm -f /tmp/prism-build-cache /tmp/prism-test-cache 2>/dev/null; echo \"$fp\" | grep -q '\\.test\\.' && rm -f /tmp/prism-test-cache 2>/dev/null; true",
            "timeout": 1000,
            "continueOnError": true
          }
        ]
      },
      {
        "matcher": "^Bash$",
        "hooks": [
          {
            "type": "command",
            "command": "[ -n \"$TOOL_INPUT_command\" ] && npx @claude-flow/cli@latest hooks post-command --command \"$TOOL_INPUT_command\" --success \"${TOOL_SUCCESS:-true}\" 2>/dev/null || true",
            "timeout": 5000,
            "continueOnError": true
          },
          {
            "type": "command",
            "command": "echo \"$TOOL_INPUT_command\" | grep -q 'git commit' && bash /c/PRISM/.claude/helpers/session-breadcrumb.sh 2>/dev/null || true",
            "timeout": 3000,
            "continueOnError": true
          },
          {
            "type": "command",
            "command": "bash /c/PRISM/.claude/helpers/cache-writer.sh \"$TOOL_INPUT_command\" \"${TOOL_SUCCESS:-true}\" 2>/dev/null || true",
            "timeout": 2000,
            "continueOnError": true
          }
        ]
      },
      {
        "matcher": "^Task$",
        "hooks": [
          {
            "type": "command",
            "command": "[ -n \"$TOOL_RESULT_agent_id\" ] && npx @claude-flow/cli@latest hooks post-task --task-id \"$TOOL_RESULT_agent_id\" --success \"${TOOL_SUCCESS:-true}\" 2>/dev/null || true",
            "timeout": 5000,
            "continueOnError": true
          }
        ]
      },
      {
        "matcher": "^Read$",
        "hooks": [
          {
            "type": "command",
            "command": "bash /c/PRISM/.claude/helpers/read-tracker.sh 2>/dev/null || true",
            "timeout": 1000,
            "async": true,
            "continueOnError": true
          }
        ]
      },
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash /c/PRISM/.claude/helpers/loop-detector.sh 2>/dev/null || true",
            "timeout": 2000,
            "async": true,
            "continueOnError": true
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash /c/PRISM/.claude/helpers/auto-route.sh \"$PROMPT\" 2>/dev/null || true",
            "timeout": 3000,
            "continueOnError": true
          },
          {
            "type": "command",
            "command": "[ -n \"$PROMPT\" ] && npx @claude-flow/cli@latest hooks route --task \"$PROMPT\" || true",
            "timeout": 5000,
            "continueOnError": true
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash /c/PRISM/.claude/helpers/sync-memory.sh 2>/dev/null || true",
            "timeout": 10000,
            "continueOnError": true
          },
          {
            "type": "command",
            "command": "npx @claude-flow/cli@latest daemon start --quiet 2>/dev/null || true",
            "timeout": 5000,
            "continueOnError": true
          },
          {
            "type": "command",
            "command": "[ -n \"$SESSION_ID\" ] && npx @claude-flow/cli@latest hooks session-restore --session-id \"$SESSION_ID\" 2>/dev/null || true",
            "timeout": 10000,
            "continueOnError": true
          }
        ]
      },
      {
        "matcher": "compact",
        "hooks": [
          {
            "type": "command",
            "command": "cat /c/PRISM/.claude/helpers/.compaction-survival.md 2>/dev/null || echo 'No compaction data'",
            "timeout": 3000,
            "continueOnError": true
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash /c/PRISM/.claude/helpers/stop-guard.sh 2>/dev/null || true",
            "timeout": 5000,
            "continueOnError": true
          },
          {
            "type": "command",
            "command": "bash /c/PRISM/.claude/helpers/session-summary.sh 2>/dev/null || true",
            "timeout": 5000,
            "continueOnError": true
          },
          {
            "type": "command",
            "command": "bash /c/PRISM/.claude/helpers/sync-memory.sh 2>/dev/null || true",
            "timeout": 10000,
            "continueOnError": true
          },
          {
            "type": "command",
            "command": "bash /c/PRISM/.claude/helpers/compaction-survival.sh 2>/dev/null || true",
            "timeout": 5000,
            "continueOnError": true
          },
          {
            "type": "command",
            "command": "npx @claude-flow/cli@latest daemon stop --quiet 2>/dev/null || true",
            "timeout": 5000,
            "continueOnError": true
          }
        ]
      }
    ],
    "Notification": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "[ -n \"$NOTIFICATION_MESSAGE\" ] && npx @claude-flow/cli@latest memory store --namespace notifications --key \"notify-$(date +%s)\" --value \"$NOTIFICATION_MESSAGE\" 2>/dev/null || true",
            "timeout": 3000,
            "continueOnError": true
          }
        ]
      },
      {
        "matcher": "idle_prompt",
        "hooks": [
          {
            "type": "command",
            "command": "bash /c/PRISM/.claude/helpers/idle-reminder.sh 2>/dev/null || true",
            "timeout": 3000,
            "continueOnError": true
          }
        ]
      }
    ],
    "PreCompact": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash /c/PRISM/.claude/helpers/pre-compact.sh 2>/dev/null || true",
            "timeout": 5000,
            "continueOnError": true
          }
        ]
      }
    ],
    "PostToolUseFailure": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash /c/PRISM/.claude/helpers/error-recovery.sh 2>/dev/null || true",
            "timeout": 3000,
            "continueOnError": true
          },
          {
            "type": "command",
            "command": "bash /c/PRISM/.claude/helpers/smart-recovery.sh 2>/dev/null || true",
            "timeout": 3000,
            "continueOnError": true
          },
          {
            "type": "command",
            "command": "npx @claude-flow/cli@latest hooks error-report --tool \"${TOOL_NAME:-unknown}\" --error \"${TOOL_ERROR:-unknown}\" 2>/dev/null || true",
            "timeout": 3000,
            "continueOnError": true
          }
        ]
      }
    ],
    "SubagentStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash /c/PRISM/.claude/helpers/subagent-context.sh 2>/dev/null || true",
            "timeout": 3000,
            "continueOnError": true
          },
          {
            "type": "command",
            "command": "npx @claude-flow/cli@latest hooks pre-task --task-id \"subagent-$(date +%s)\" --description \"Subagent spawned\" 2>/dev/null || true",
            "timeout": 3000,
            "continueOnError": true
          }
        ]
      }
    ],
    "SessionEnd": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash /c/PRISM/.claude/helpers/session-end.sh 2>/dev/null || true",
            "timeout": 5000,
            "continueOnError": true
          }
        ]
      }
    ],
    "TaskCompleted": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash /c/PRISM/.claude/helpers/task-gate.sh 2>/dev/null || true",
            "timeout": 3000,
            "continueOnError": true
          }
        ]
      }
    ],
    "ConfigChange": [
      {
        "matcher": "project_settings",
        "hooks": [
          {
            "type": "command",
            "command": "bash /c/PRISM/.claude/helpers/config-guard.sh 2>/dev/null || true",
            "timeout": 3000,
            "continueOnError": true
          }
        ]
      }
    ],
    "WorktreeCreate": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash /c/PRISM/.claude/helpers/worktree-track.sh 2>/dev/null || true",
            "timeout": 2000,
            "continueOnError": true
          }
        ]
      }
    ],
    "WorktreeRemove": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash /c/PRISM/.claude/helpers/worktree-cleanup.sh 2>/dev/null || true",
            "timeout": 2000,
            "continueOnError": true
          }
        ]
      }
    ],
    "SubagentStop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash /c/PRISM/.claude/helpers/subagent-results.sh 2>/dev/null || true",
            "timeout": 3000,
            "continueOnError": true
          },
          {
            "type": "command",
            "command": "npx @claude-flow/cli@latest hooks post-task --task-id \"subagent-done-$(date +%s)\" --success \"true\" 2>/dev/null || true",
            "timeout": 3000,
            "continueOnError": true
          }
        ]
      }
    ]
  },
  "statusLine": {
    "type": "command",
    "command": "npx @claude-flow/cli@latest hooks statusline 2>/dev/null || node .claude/helpers/statusline.cjs 2>/dev/null || echo \"â–Š Claude Flow V3\"",
    "refreshMs": 5000,
    "enabled": true
  },
  "permissions": {
    "allow": [
      "Bash(npx claude-flow:*)",
      "Bash(npx @claude-flow/cli:*)",
      "mcp__claude-flow__:*"
    ],
    "deny": []
  },
  "claudeFlow": {
    "version": "3.0.0",
    "enabled": true,
    "modelPreferences": {
      "default": "claude-opus-4-5-20251101",
      "routing": "claude-3-5-haiku-20241022"
    },
    "swarm": {
      "topology": "hierarchical-mesh",
      "maxAgents": 15
    },
    "memory": {
      "backend": "hybrid",
      "enableHNSW": true
    },
    "neural": {
      "enabled": true
    },
    "daemon": {
      "autoStart": true,
      "workers": [
        "map",
        "audit",
        "optimize",
        "consolidate",
        "testgaps",
        "ultralearn",
        "deepdive",
        "document",
        "refactor",
        "benchmark"
      ],
      "schedules": {
        "audit": {
          "interval": "1h",
          "priority": "critical"
        },
        "optimize": {
          "interval": "30m",
          "priority": "high"
        },
        "consolidate": {
          "interval": "2h",
          "priority": "low"
        },
        "document": {
          "interval": "1h",
          "priority": "normal",
          "triggers": [
            "adr-update",
            "api-change"
          ]
        },
        "deepdive": {
          "interval": "4h",
          "priority": "normal",
          "triggers": [
            "complex-change"
          ]
        },
        "ultralearn": {
          "interval": "1h",
          "priority": "normal"
        }
      }
    },
    "learning": {
      "enabled": true,
      "autoTrain": true,
      "patterns": [
        "coordination",
        "optimization",
        "prediction"
      ],
      "retention": {
        "shortTerm": "24h",
        "longTerm": "30d"
      }
    },
    "adr": {
      "autoGenerate": true,
      "directory": "/docs/adr",
      "template": "madr"
    },
    "ddd": {
      "trackDomains": true,
      "validateBoundedContexts": true,
      "directory": "/docs/ddd"
    },
    "security": {
      "autoScan": true,
      "scanOnEdit": true,
      "cveCheck": true,
      "threatModel": true
    }
  }
}