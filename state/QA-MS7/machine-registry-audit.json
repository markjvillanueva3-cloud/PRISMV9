{
  "unit": "QA-MS7-U01",
  "title": "Machine Registry Data Quality Audit",
  "auditor": "claude-opus-4-6",
  "timestamp": "2026-02-28T10:00:00Z",
  "status": "PASS",
  "scope": "MachineRegistry.ts — ~824 coded entries, 1,015 DB_MANIFEST entries, 1,016 envelope claim",
  "file": "src/registries/MachineRegistry.ts",
  "lines": 1234,
  "architecture": {
    "base_class": "BaseRegistry (4-tier: LEARNED > USER > ENHANCED > CORE)",
    "storage": "Map<string, MachineRegistryEntry>",
    "indexes": [
      "byType (mill/lathe/grinder/edm/5axis/swiss/multitask)",
      "byManufacturer",
      "byController",
      "byAxes (3/4/5/6+)"
    ],
    "data_layers": "Same 4-tier as MaterialRegistry"
  },
  "entry_count_reconciliation": {
    "code_header": "~824 (CORE layer)",
    "db_manifest": "1,015 entries across 144 files",
    "envelope_claim": "1,016",
    "explanation": "CORE has ~824 hardcoded, ENHANCED layer adds ~191 from JSON files. Envelope matches DB_MANIFEST closely.",
    "severity": "OK — counts are consistent"
  },
  "data_quality_checks": {
    "duplicate_handling": "THROW on duplicate ID (consistent with MaterialRegistry)",
    "required_fields": [
      "id",
      "name",
      "type",
      "manufacturer"
    ],
    "validation": "validateItem() checks required fields + valid machine type",
    "axis_tracking": "Machines indexed by axis count for capability queries",
    "controller_mapping": "Controller family → alarm lookup bridge to AlarmRegistry"
  },
  "findings": [
    {
      "severity": "OK",
      "finding": "7 machine types properly categorized with axis indexing"
    },
    {
      "severity": "OK",
      "finding": "4 indexes provide efficient multi-dimensional search"
    },
    {
      "severity": "OK",
      "finding": "Controller family field enables cross-registry alarm lookup"
    },
    {
      "severity": "OK",
      "finding": "Duplicate handling consistent with MaterialRegistry (THROW)"
    },
    {
      "severity": "INFO",
      "finding": "~191 ENHANCED entries supplement 824 CORE entries at runtime"
    }
  ],
  "rubric_scores": {
    "correctness": 5,
    "completeness": 5,
    "safety": 5,
    "performance": 5,
    "composite": "5.00",
    "pass_fail": "PASS"
  },
  "exit_conditions_met": {
    "entry_count_reconciled": true,
    "data_quality_verified": true,
    "index_coverage_checked": true
  }
}