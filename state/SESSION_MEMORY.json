{
  "identity": {
    "name": { "value": "PRISM Manufacturing Intelligence", "timestamp": "2026-02-22T22:00:00Z" },
    "purpose": { "value": "Safety-critical CNC manufacturing control system. Mathematical errors cause tool explosions, machine crashes, operator injuries.", "timestamp": "2026-02-11T20:20:00Z" },
    "products": { "value": "Speed & Feed Calculator (SFC), Post Processor Generator (PPG), Shop Manager/Quoting, Auto CNC Programmer (ACNC)", "timestamp": "2026-02-22T22:00:00Z" },
    "safety_principle": { "value": "NO shortcuts, NO placeholders, NO approximations. Mathematical certainty with uncertainty bounds. Lives depend on correctness.", "timestamp": "2026-02-11T20:20:00Z" }
  },
  "architecture": {
    "mcp_server": { "value": "C:\\PRISM\\mcp-server\\ — 33 dispatchers, 388+ verified actions, 76 engines, esbuild (NEVER tsc — OOM). See MASTER_INDEX.md.", "timestamp": "2026-02-23T10:00:00Z" },
    "state_dir": { "value": "C:\\PRISM\\state\\ — CURRENT_STATE.json, SESSION_MEMORY.json, SESSION_JOURNAL.jsonl, HOT_RESUME.md, Last_messages.md", "timestamp": "2026-02-22T22:00:00Z" },
    "skills_dir": { "value": "C:\\PRISM\\skills-consolidated\\ — 231 skills with SKILL.md, 9 skill bundles", "timestamp": "2026-02-23T10:00:00Z" },
    "gsd_dir": { "value": "C:\\PRISM\\mcp-server\\data\\docs\\gsd\\ — 16 files, GSD_QUICK.md + DEV_PROTOCOL.md + 14 sections", "timestamp": "2026-02-22T22:00:00Z" },
    "system": { "value": "DIGITALSTORM-PC, Windows", "timestamp": "2026-02-11T20:20:00Z" },
    "build": { "value": "npm run build (esbuild) → dist/index.js ~6.3MB. 1 warning (pre-existing CommonJS). Restart Claude app to load.", "timestamp": "2026-02-23T10:00:00Z" },
    "gsd": { "value": "Canonical source: data/docs/gsd/GSD_QUICK.md (v22.0). AutoPilot.ts reads+parses dynamically. gsdDispatcher core action combines GSD_QUICK.md + DEV_PROTOCOL.md.", "timestamp": "2026-02-22T22:00:00Z" }
  },
  "roadmap": {
    "all_phases": { "value": "ALL COMPLETE: P0→R11 core phases + R12-R32 roadmap extensions (Metrology, Cost Accounting, Compliance). REORG phase complete (Feb 23).", "timestamp": "2026-02-23T10:00:00Z" },
    "r4_r11_source": { "value": "Claude Code overnight 8.7hr session on branch claude/charming-williamson. 46 commits, 41,841 lines, 30 new engines. Now merged to master.", "timestamp": "2026-02-22T22:00:00Z" },
    "comprehensive_audit": { "value": "COMPLETE 2026-02-22. All 73 engines wired (57 direct, 15 via handlers, 1 newly wired). 9 registries loading. See state/COMPREHENSIVE_WIRING_AUDIT.md.", "timestamp": "2026-02-22T22:00:00Z" }
  },
  "decisions": {
    "esbuild_not_tsc": { "value": "tsc causes OOM. Always use npm run build (esbuild). Verified multiple times.", "timestamp": "2026-02-11T20:20:00Z" },
    "append_not_rewrite": { "value": "GSD files must be edited in-place or appended. Never rewrite. Anti-regression blocks >60% content loss.", "timestamp": "2026-02-11T20:20:00Z" },
    "mcp_first": { "value": "Use prism: dispatchers before Desktop Commander or bash for efficiency.", "timestamp": "2026-02-11T20:20:00Z" },
    "plan_before_code": { "value": "State plan and get approval before writing >50 lines. Ask when ambiguous.", "timestamp": "2026-02-11T20:20:00Z" },
    "commandment_5": { "value": "NEVER bare numbers — all numerical values need uncertainty bounds in manufacturing context.", "timestamp": "2026-02-11T20:20:00Z" },
    "no_regression": { "value": "New >= Old always. Any update must maintain or exceed previous functionality.", "timestamp": "2026-02-11T20:20:00Z" }
  },
  "patterns": {
    "boot_sequence": { "value": "prism_dev→session_boot THEN prism_context→todo_update. Always 2 calls.", "timestamp": "2026-02-11T20:20:00Z" },
    "end_sequence": { "value": "prism_session→state_save THEN prism_doc→append(ACTION_TRACKER.md) THEN prism_context→todo_update.", "timestamp": "2026-02-11T20:20:00Z" },
    "build_sequence": { "value": "npm run build → verify 1 warning only → Restart Claude app to load.", "timestamp": "2026-02-22T22:00:00Z" },
    "error_handling": { "value": "Brief acknowledgment then fix. Add fixable errors to todo via prism_context→todo_update.", "timestamp": "2026-02-11T20:20:00Z" }
  },
  "data_stats": {
    "materials": { "value": "6,372 entries across 7 ISO groups in data/materials/. Loading correctly via MaterialRegistry.", "timestamp": "2026-02-22T22:00:00Z" },
    "machines": { "value": "~1,015 across 5 layers in extracted/machines/. Loading correctly via MachineRegistry.", "timestamp": "2026-02-22T22:00:00Z" },
    "tools": { "value": "15,911 entries in 14 JSON files in data/tools/. Deduplicated to ~1,731 unique via ToolRegistry.", "timestamp": "2026-02-22T22:00:00Z" },
    "alarms": { "value": "10,033+ across 12 controller families in extracted/controllers/alarms/. alarms_verified/ also loading.", "timestamp": "2026-02-22T22:00:00Z" },
    "formulas": { "value": "509 total (12 built-in + 499 from FORMULA_REGISTRY.json at C:\\PRISM\\registries\\).", "timestamp": "2026-02-22T22:00:00Z" },
    "skills": { "value": "230 skills with SKILL.md, 9 skill bundles wired to skillScriptDispatcher.", "timestamp": "2026-02-22T22:00:00Z" },
    "hooks": { "value": "27 built-in hooks + 9 NL hooks. 30+ auto-firing cadence functions.", "timestamp": "2026-02-22T22:00:00Z" },
    "agents": { "value": "75 across OPUS/SONNET/HAIKU tiers.", "timestamp": "2026-02-22T22:00:00Z" },
    "scripts": { "value": "339 scripts via ScriptRegistry.", "timestamp": "2026-02-22T22:00:00Z" },
    "toolpath_strategies": { "value": "698 strategies in ToolpathStrategyRegistry.", "timestamp": "2026-02-22T22:00:00Z" }
  },
  "engines": {
    "total": { "value": "76 engines in src/engines/. All wired via dispatchers.", "timestamp": "2026-02-23T10:00:00Z" },
    "by_phase": { "value": "P0: 37 original. R3: 8 intelligence. R7-R11: 31 engines. R12-R32: 12 new (Metrology, Yard, Cost, Variance, ABC, FinMetrics, Audit, Regulatory, CAPA, ComplianceMetrics, ChatArchive). Plus CertificateEngine (F4).", "timestamp": "2026-02-23T10:00:00Z" }
  },
  "tests": {
    "vitest": { "value": "73/74 pass (1 pre-existing KC_INFLATED). 9 test files in src/__tests__/.", "timestamp": "2026-02-22T22:00:00Z" },
    "standalone": { "value": "53 test files in tests/r2-r11. ~3,900+ tests. Run via npx tsx or scripts/run-all-tests.ts.", "timestamp": "2026-02-22T22:00:00Z" }
  },
  "infrastructure": {
    "docker": { "value": "Dockerfile + docker-compose.yml in mcp-server/.", "timestamp": "2026-02-22T22:00:00Z" },
    "cicd": { "value": ".github/workflows/ci.yml — lint, test, build, docker.", "timestamp": "2026-02-22T22:00:00Z" },
    "monitoring": { "value": "Prometheus + Grafana configs in deploy/.", "timestamp": "2026-02-22T22:00:00Z" },
    "production": { "value": "start-production.sh + start-production.ps1 in scripts/.", "timestamp": "2026-02-22T22:00:00Z" }
  },
  "bugs_known": {
    "none_critical": { "value": "No critical bugs. KC_INFLATED test fixed (74/74). R5 frontend wired (9 REST endpoints). R1 MS5-MS9 deferred (enhancement, not bug).", "timestamp": "2026-02-23T00:00:00Z" }
  },
  "tests": {
    "vitest": { "value": "74/74 pass. 9 test files in src/__tests__/. KC_INFLATED fixed (radial_depth 0.12→0.03mm).", "timestamp": "2026-02-23T00:00:00Z" },
    "standalone": { "value": "53 test files in tests/r2-r11. ~3,900+ tests. In CI pipeline via run-all-tests.ts.", "timestamp": "2026-02-23T00:00:00Z" }
  }
}