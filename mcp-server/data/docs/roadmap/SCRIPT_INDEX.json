{
  "scripts": [
    {
      "id": "position-validator",
      "purpose": "Cross-validates CURRENT_POSITION.md against ROADMAP_TRACKER.md",
      "trigger": "Session start, compaction recovery, before phase gate",
      "location": "scripts/roadmap/position-validator.js",
      "runtime": "node",
      "parameters": "none",
      "output": "PASS/FAIL with details",
      "phases": ["ALL"],
      "frequency": "every-session"
    },
    {
      "id": "build-section-index",
      "purpose": "Builds anchor index from phase doc ANCHOR comments",
      "trigger": "After anchor placement in phase docs",
      "location": "scripts/roadmap/build-section-index.ps1",
      "runtime": "powershell",
      "parameters": "none",
      "output": "ROADMAP_SECTION_INDEX.md",
      "phases": ["DA"],
      "frequency": "after-anchor-edit"
    },
    {
      "id": "place-anchors",
      "purpose": "Places ANCHOR comments in phase files for section loading",
      "trigger": "Phase doc creation or major restructure",
      "location": "scripts/roadmap/place-anchors.ps1",
      "runtime": "powershell",
      "parameters": "none",
      "output": "Modified phase files with anchors",
      "phases": ["DA"],
      "frequency": "per-phase-doc"
    },
    {
      "id": "roadmap-lint",
      "purpose": "Validates roadmap docs for consistency (anchors, line counts, references)",
      "trigger": "Before phase gate, after phase doc edit",
      "location": "scripts/roadmap/roadmap-lint.ps1",
      "runtime": "powershell",
      "parameters": "none",
      "output": "Lint report with warnings/errors",
      "phases": ["ALL"],
      "frequency": "before-gate"
    },
    {
      "id": "roadmap-regression-test",
      "purpose": "Verifies no roadmap content was lost after edits",
      "trigger": "After roadmap tracker update, after major edits",
      "location": "scripts/roadmap/roadmap-regression-test.ps1",
      "runtime": "powershell",
      "parameters": "none",
      "output": "PASS/FAIL regression report",
      "phases": ["ALL"],
      "frequency": "after-major-edit"
    },
    {
      "id": "rebuild-section-index",
      "purpose": "Regenerates ROADMAP_SECTION_INDEX.md from current anchor positions",
      "trigger": "After any phase doc edit that changes line numbers",
      "location": "scripts/roadmap/rebuild-section-index.ps1",
      "runtime": "powershell",
      "parameters": "none",
      "output": "Updated ROADMAP_SECTION_INDEX.md with anchor count",
      "phases": ["ALL"],
      "frequency": "after-phase-edit"
    },
    {
      "id": "update-token-estimates",
      "purpose": "Updates token cost estimates based on current file sizes",
      "trigger": "After file size changes from edits or archival",
      "location": "scripts/roadmap/update-token-estimates.ps1",
      "runtime": "powershell",
      "parameters": "none",
      "output": "Updated token estimates in recovery card/instructions",
      "phases": ["ALL"],
      "frequency": "occasional"
    },
    {
      "id": "split-skill",
      "purpose": "Analyzes monolithic skill and proposes atomic splits",
      "trigger": "Skill atomization pilot and bulk splitting",
      "location": "scripts/skills/split-skill.ps1",
      "runtime": "powershell",
      "parameters": "-Path <skill-directory>",
      "output": "Proposed atomic skill list with names, functions, estimated sizes",
      "phases": ["DA", "R12"],
      "frequency": "per-skill-split"
    },
    {
      "id": "extract-course-skills",
      "purpose": "Extracts skill proposals from MIT OCW course directories",
      "trigger": "Course extraction pilot and bulk processing",
      "location": "scripts/skills/extract-course-skills.ps1",
      "runtime": "powershell",
      "parameters": "-Path <course-directory>",
      "output": "Proposed skills with names, source lectures, function descriptions",
      "phases": ["DA"],
      "frequency": "per-course"
    },
    {
      "id": "update-skill-index",
      "purpose": "Adds/updates skills in SKILL_INDEX.json from skill directories",
      "trigger": "After any skill creation or modification",
      "location": "scripts/skills/update-skill-index.ps1",
      "runtime": "powershell",
      "parameters": "-Path <skill-directory> or -BatchPath <parent-directory>",
      "output": "Updated SKILL_INDEX.json with new/modified entries",
      "phases": ["ALL"],
      "frequency": "after-skill-change"
    },
    {
      "id": "prebuild-gate",
      "purpose": "Pre-build validation gate — blocks build if critical checks fail",
      "trigger": "Automatic via npm run build (prebuild hook)",
      "location": "scripts/prebuild-gate.cjs",
      "runtime": "node",
      "parameters": "none",
      "output": "PASS/FAIL with gate check details",
      "phases": ["ALL"],
      "frequency": "every-build"
    },
    {
      "id": "release-gate",
      "purpose": "Full release validation — tests, build size, regression, safety checks",
      "trigger": "Before release (npm run release-gate)",
      "location": "scripts/release-gate.ts",
      "runtime": "tsx",
      "parameters": "--dry-run (optional)",
      "output": "Release readiness report",
      "phases": ["ALL"],
      "frequency": "before-release"
    },
    {
      "id": "test-all",
      "purpose": "Unified test runner — vitest, prebuild-gate, phantom-skills, session-preflight, build + size check",
      "trigger": "npm run test:all, before release, CI pipeline",
      "location": "scripts/test-all.cjs",
      "runtime": "node",
      "parameters": "none",
      "output": "state/test-all-report.json (JSON report with per-suite results)",
      "phases": ["ALL"],
      "frequency": "every-session"
    },
    {
      "id": "session-preflight",
      "purpose": "Session startup preflight checks — validates system health",
      "trigger": "Session start via ScriptRegistry/cadence",
      "location": "scripts/session_preflight.cjs",
      "runtime": "node",
      "parameters": "none",
      "output": "Health check results",
      "phases": ["ALL"],
      "frequency": "every-session"
    },
    {
      "id": "snapshot",
      "purpose": "Takes/compares codebase snapshots for anti-regression",
      "trigger": "Before/after refactoring, registered in ScriptRegistry",
      "location": "scripts/snapshot.js",
      "runtime": "node",
      "parameters": "take|diff|list <name>",
      "output": "Snapshot file or diff report",
      "phases": ["ALL"],
      "frequency": "before-refactor"
    },
    {
      "id": "utilization-tracker",
      "purpose": "Tracks action utilization rates across dispatchers",
      "trigger": "Cadence function, periodic telemetry",
      "location": "scripts/utilization_tracker.js",
      "runtime": "node",
      "parameters": "none",
      "output": "Utilization report JSON",
      "phases": ["ALL"],
      "frequency": "periodic"
    },
    {
      "id": "file-safety-classification",
      "purpose": "Classifies files by safety tier (CRITICAL/HIGH/STANDARD)",
      "trigger": "Before edits to engine files, hook-adjacent",
      "location": "scripts/file_safety_classification.js",
      "runtime": "node",
      "parameters": "none",
      "output": "Safety classification per file",
      "phases": ["ALL"],
      "frequency": "on-demand"
    },
    {
      "id": "populate-skill-triggers",
      "purpose": "Extracts trigger keywords from SKILL.md files for SKILL_INDEX",
      "trigger": "R12-MS1: Skill trigger activation",
      "location": "scripts/populate_skill_triggers.py",
      "runtime": "python",
      "parameters": "none",
      "output": "Updated trigger arrays in SKILL_INDEX.json",
      "phases": ["R12"],
      "frequency": "per-trigger-batch"
    },
    {
      "id": "backup-before-edit",
      "purpose": "Creates backup of files before major edits",
      "trigger": "Before editing CRITICAL-tier files",
      "location": "scripts/backup-before-edit.ps1",
      "runtime": "powershell",
      "parameters": "file path",
      "output": "Backup file in _archived/",
      "phases": ["ALL"],
      "frequency": "before-critical-edit"
    },
    {
      "id": "verify-build",
      "purpose": "Post-build verification — checks output, size, exports",
      "trigger": "After build completes",
      "location": "scripts/verify-build.ps1",
      "runtime": "powershell",
      "parameters": "none",
      "output": "Build verification report",
      "phases": ["ALL"],
      "frequency": "every-build"
    },
    {
      "id": "start-production",
      "purpose": "Starts MCP server in production mode",
      "trigger": "Manual — production deployment",
      "location": "scripts/start-production.sh",
      "runtime": "bash/powershell",
      "parameters": "none",
      "output": "Running server process",
      "phases": ["ALL"],
      "frequency": "on-deploy"
    },
    {
      "id": "wiring-audit",
      "purpose": "Audits dispatcher wiring — finds unwired or phantom actions",
      "trigger": "Before phase gate, after adding new actions",
      "location": "scripts/audit/wiring-audit.js",
      "runtime": "node",
      "parameters": "none",
      "output": "Wiring audit report",
      "phases": ["ALL"],
      "frequency": "before-gate"
    },
    {
      "id": "performance-baseline",
      "purpose": "Establishes and compares performance baselines",
      "trigger": "Before/after optimization work",
      "location": "scripts/performance_baseline.ts",
      "runtime": "tsx",
      "parameters": "none",
      "output": "Performance baseline JSON",
      "phases": ["ALL"],
      "frequency": "before-optimization"
    },
    {
      "id": "load-test-runner",
      "purpose": "Runs load tests against MCP server endpoints",
      "trigger": "Before release, performance validation",
      "location": "scripts/load_test_runner.ts",
      "runtime": "tsx",
      "parameters": "none",
      "output": "Load test results",
      "phases": ["ALL"],
      "frequency": "before-release"
    },
    {
      "id": "check-externals",
      "purpose": "Validates external dependencies and build prerequisites",
      "trigger": "Before build, dependency check",
      "location": "scripts/check_externals.ps1",
      "runtime": "powershell",
      "parameters": "none",
      "output": "External dependency report",
      "phases": ["ALL"],
      "frequency": "every-build"
    },
    {
      "id": "phantom-skill-detector",
      "purpose": "Detects phantom skills (in index but missing on disk) and orphan skills (on disk but not indexed)",
      "trigger": "Session preflight, before skill operations",
      "location": "scripts/phantom-skill-detector.cjs",
      "runtime": "node",
      "parameters": "none",
      "output": "Phantom/orphan report + state/phantom_skill_report.json",
      "phases": ["ALL"],
      "frequency": "every-session"
    },
    {
      "id": "rotate-audit-logs",
      "purpose": "Rotates audit.jsonl and error.jsonl when they exceed 5MB, keeps last 5 rotated files",
      "trigger": "Session start, before heavy logging operations",
      "location": "scripts/rotate-audit-logs.cjs",
      "runtime": "node",
      "parameters": "none",
      "output": "Rotation status report",
      "phases": ["ALL"],
      "frequency": "every-session"
    }
  ],
  "archived": {
    "location": "scripts/_completed_utilities/",
    "count": 50,
    "description": "One-time migration, gap-fill, and recovery scripts. Preserved for reference."
  },
  "metadata": {
    "total": 27,
    "archived": 50,
    "last_updated": "2026-02-23",
    "version": "2.0",
    "by_runtime": { "node": 9, "powershell": 9, "tsx": 4, "python": 1, "bash": 1, "mixed": 1 },
    "by_frequency": { "every-session": 3, "every-build": 3, "before-gate": 3, "before-release": 2, "periodic": 1, "on-demand": 3, "per-task": 4, "on-deploy": 1, "other": 5 }
  }
}
