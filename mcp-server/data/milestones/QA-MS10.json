{
  "id": "QA-MS10",
  "version": "1.0.0",
  "title": "Manufacturing Engines Deep Audit",
  "brief": "Deep audit of manufacturing engines: StabilityEngine chatter prediction, GrindingEngine/EDMEngine specialty processes, FiveAxisEngine multi-axis toolpath, PostProcessorEngine G-code generation, CadValidationEngine geometry validation, and engine-to-dispatcher wiring completeness.",
  "created_at": "2026-02-27T12:00:00Z",
  "created_by": "claude-opus-4.6",
  "phases": [
    {
      "id": "P0",
      "title": "Manufacturing Engines Deep Audit",
      "description": "Verify manufacturing engine implementations for correctness, coverage, and wiring to dispatchers.",
      "sessions": "2-3",
      "primary_role": "R4",
      "primary_model": "opus-4.6",
      "units": [
        {
          "id": "P0-U00", "title": "StabilityEngine: chatter prediction accuracy",
          "phase": "P0", "sequence": 0, "role": "R4", "role_name": "Auditor", "model": "opus-4.6", "effort": 90,
          "rationale": "OPUS/HIGH — chatter prediction is safety-critical",
          "tools": [{ "tool": "prism_calc" }, { "tool": "prism_validate" }], "skills": ["smart"], "scripts": [], "hooks": [], "features": [],
          "dependencies": [], "entry_conditions": ["QA-MS8/QA-MS9 dispatcher audits complete"],
          "exit_conditions": ["Stability analysis algorithm verified against SLD from QA-MS4", "Chatter detection thresholds validated", "Integration with toolpath planning verified"],
          "rollback": "git checkout -- state/QA-MS10/",
          "steps": [
            { "number": 1, "instruction": "Read StabilityEngine and map chatter prediction logic" },
            { "number": 2, "instruction": "Cross-reference with SLD algorithm verified in QA-MS4" },
            { "number": 3, "instruction": "Verify chatter detection threshold logic" },
            { "number": 4, "instruction": "Verify integration with toolpath planning actions" },
            { "number": 5, "instruction": "Document in state/QA-MS10/stability-engine-audit.json" }
          ],
          "deliverables": [{ "path": "state/QA-MS10/stability-engine-audit.json", "type": "data", "description": "StabilityEngine chatter prediction audit" }],
          "index_in_master": false, "creates_skill": false, "creates_script": false, "creates_hook": false, "creates_command": false
        },
        {
          "id": "P0-U01", "title": "GrindingEngine + EDMEngine: specialty process coverage",
          "phase": "P0", "sequence": 1, "role": "R4", "role_name": "Auditor", "model": "sonnet-4.6", "effort": 70,
          "rationale": "SONNET/MEDIUM — specialty process engines",
          "tools": [{ "tool": "prism_calc" }], "skills": ["smart"], "scripts": [], "hooks": [], "features": [],
          "dependencies": ["P0-U00"], "entry_conditions": ["Stability engine audit complete"],
          "exit_conditions": ["Grinding process models verified", "EDM process models verified", "Process parameter ranges validated"],
          "rollback": "git checkout -- state/QA-MS10/",
          "steps": [
            { "number": 1, "instruction": "Read GrindingEngine and verify grinding force/thermal models" },
            { "number": 2, "instruction": "Read EDMEngine and verify EDM material removal models" },
            { "number": 3, "instruction": "Verify process parameter ranges" },
            { "number": 4, "instruction": "Document in state/QA-MS10/grinding-edm-audit.json" }
          ],
          "deliverables": [{ "path": "state/QA-MS10/grinding-edm-audit.json", "type": "data", "description": "Grinding/EDM engine audit" }],
          "index_in_master": false, "creates_skill": false, "creates_script": false, "creates_hook": false, "creates_command": false
        },
        {
          "id": "P0-U02", "title": "FiveAxisEngine: multi-axis toolpath validation",
          "phase": "P0", "sequence": 2, "role": "R4", "role_name": "Auditor", "model": "opus-4.6", "effort": 90,
          "rationale": "OPUS/HIGH — 5-axis is the most complex toolpath type",
          "tools": [{ "tool": "prism_toolpath" }, { "tool": "prism_validate" }], "skills": ["smart"], "scripts": [], "hooks": [], "features": [],
          "dependencies": ["P0-U01"], "entry_conditions": ["Grinding/EDM audit complete"],
          "exit_conditions": ["5-axis kinematic model verified", "Tool orientation calculations verified", "Collision detection logic verified"],
          "rollback": "git checkout -- state/QA-MS10/",
          "steps": [
            { "number": 1, "instruction": "Read FiveAxisEngine and map kinematic model" },
            { "number": 2, "instruction": "Verify tool orientation (lead/tilt angle) calculations" },
            { "number": 3, "instruction": "Verify collision detection logic" },
            { "number": 4, "instruction": "Verify gouge avoidance algorithms" },
            { "number": 5, "instruction": "Document in state/QA-MS10/five-axis-audit.json" }
          ],
          "deliverables": [{ "path": "state/QA-MS10/five-axis-audit.json", "type": "data", "description": "FiveAxisEngine audit" }],
          "index_in_master": false, "creates_skill": false, "creates_script": false, "creates_hook": false, "creates_command": false
        },
        {
          "id": "P0-U03", "title": "PostProcessorEngine: G-code generation correctness",
          "phase": "P0", "sequence": 3, "role": "R4", "role_name": "Auditor", "model": "opus-4.6", "effort": 90,
          "rationale": "OPUS/HIGH — incorrect G-code is safety-critical",
          "tools": [{ "tool": "prism_toolpath" }, { "tool": "prism_validate" }], "skills": ["smart"], "scripts": [], "hooks": [], "features": [],
          "dependencies": ["P0-U02"], "entry_conditions": ["5-axis audit complete"],
          "exit_conditions": ["G-code generation templates verified", "Machine-specific post configurations verified", "Safety G-codes (tool change, coolant, emergency) verified"],
          "rollback": "git checkout -- state/QA-MS10/",
          "steps": [
            { "number": 1, "instruction": "Read PostProcessorEngine G-code generation logic" },
            { "number": 2, "instruction": "Verify G-code syntax for major control types (Fanuc, Siemens, Haas)" },
            { "number": 3, "instruction": "Verify safety-critical G-codes are always included" },
            { "number": 4, "instruction": "Verify coordinate system and unit handling" },
            { "number": 5, "instruction": "Document in state/QA-MS10/post-processor-audit.json" }
          ],
          "deliverables": [{ "path": "state/QA-MS10/post-processor-audit.json", "type": "data", "description": "PostProcessorEngine G-code audit" }],
          "index_in_master": false, "creates_skill": false, "creates_script": false, "creates_hook": false, "creates_command": false
        },
        {
          "id": "P0-U04", "title": "CadValidationEngine: geometry validation logic",
          "phase": "P0", "sequence": 4, "role": "R4", "role_name": "Auditor", "model": "sonnet-4.6", "effort": 70,
          "rationale": "SONNET/MEDIUM — geometry validation review",
          "tools": [{ "tool": "prism_validate" }], "skills": ["smart"], "scripts": [], "hooks": [], "features": [],
          "dependencies": ["P0-U03"], "entry_conditions": ["Post processor audit complete"],
          "exit_conditions": ["Geometry validation rules documented", "Feature recognition logic verified", "Manufacturability check coverage assessed"],
          "rollback": "git checkout -- state/QA-MS10/",
          "steps": [
            { "number": 1, "instruction": "Read CadValidationEngine validation rules" },
            { "number": 2, "instruction": "Verify feature recognition logic" },
            { "number": 3, "instruction": "Assess manufacturability check coverage" },
            { "number": 4, "instruction": "Document in state/QA-MS10/cad-validation-audit.json" }
          ],
          "deliverables": [{ "path": "state/QA-MS10/cad-validation-audit.json", "type": "data", "description": "CadValidationEngine audit" }],
          "index_in_master": false, "creates_skill": false, "creates_script": false, "creates_hook": false, "creates_command": false
        },
        {
          "id": "P0-U05", "title": "Engine-to-dispatcher wiring completeness (all manufacturing)",
          "phase": "P0", "sequence": 5, "role": "R4", "role_name": "Auditor", "model": "sonnet-4.6", "effort": 70,
          "rationale": "SONNET/MEDIUM — cross-cutting wiring check",
          "tools": [{ "tool": "prism_intelligence", "action": "query" }, { "tool": "prism_validate" }], "skills": ["smart"], "scripts": [], "hooks": [], "features": [],
          "dependencies": ["P0-U04"], "entry_conditions": ["All manufacturing engine audits complete"],
          "exit_conditions": ["Engine→dispatcher wiring matrix complete for all manufacturing engines", "Unwired engine methods identified", "Wiring coverage percentage calculated"],
          "rollback": "git checkout -- state/QA-MS10/",
          "steps": [
            { "number": 1, "instruction": "Build engine → dispatcher wiring matrix for all manufacturing engines" },
            { "number": 2, "instruction": "Identify engine methods with no dispatcher exposure" },
            { "number": 3, "instruction": "Calculate overall manufacturing wiring coverage %" },
            { "number": 4, "instruction": "Document in state/QA-MS10/manufacturing-wiring-audit.json" }
          ],
          "deliverables": [{ "path": "state/QA-MS10/manufacturing-wiring-audit.json", "type": "data", "description": "Manufacturing engine-to-dispatcher wiring audit" }],
          "index_in_master": false, "creates_skill": false, "creates_script": false, "creates_hook": false, "creates_command": false
        }
      ],
      "gate": {
        "omega_floor": 0.75, "safety_floor": 0.80, "ralph_required": false, "ralph_grade_floor": "B",
        "anti_regression": true, "test_required": true, "build_required": true, "checkpoint": true, "learning_save": true,
        "custom_checks": ["All manufacturing engines audited", "G-code safety codes verified", "Wiring matrix complete"]
      },
      "scrutiny_checkpoint": true, "scrutiny_focus": ["missing_tests", "underspecified_steps"]
    }
  ],
  "total_units": 6,
  "total_sessions": "2-3",
  "role_matrix": [
    { "code": "R4", "name": "Auditor", "model": "opus-4.6", "effort": 90 },
    { "code": "R4", "name": "Auditor", "model": "sonnet-4.6", "effort": 70 }
  ],
  "tool_map": [
    { "tool": "prism_calc", "phases": ["P0"] },
    { "tool": "prism_toolpath", "phases": ["P0"] },
    { "tool": "prism_validate", "phases": ["P0"] },
    { "tool": "prism_intelligence", "phases": ["P0"] }
  ],
  "deliverables_index": [
    { "path": "state/QA-MS10/stability-engine-audit.json", "type": "data", "description": "Stability audit" },
    { "path": "state/QA-MS10/grinding-edm-audit.json", "type": "data", "description": "Grinding/EDM audit" },
    { "path": "state/QA-MS10/five-axis-audit.json", "type": "data", "description": "5-axis audit" },
    { "path": "state/QA-MS10/post-processor-audit.json", "type": "data", "description": "Post processor audit" },
    { "path": "state/QA-MS10/cad-validation-audit.json", "type": "data", "description": "CAD validation audit" },
    { "path": "state/QA-MS10/manufacturing-wiring-audit.json", "type": "data", "description": "Manufacturing wiring" }
  ],
  "existing_leverage": [
    { "asset": "Manufacturing engines", "type": "source", "usage": "Primary audit targets" },
    { "asset": "SLD algorithm (QA-MS4)", "type": "data", "usage": "Cross-reference for stability" }
  ],
  "scrutiny_config": {
    "pass_mode": "adaptive", "min_passes": 3, "max_passes": 7,
    "convergence_rule": "delta < 2", "escalation_rule": "if pass 4+ finds CRITICAL, flag for human review",
    "scrutinizer_model": "opus-4.6", "scrutinizer_effort": 90,
    "gap_categories": ["missing_tools", "missing_deps", "missing_exit_conditions", "missing_tests", "underspecified_steps"],
    "improvement_threshold": 0.92
  }
}
